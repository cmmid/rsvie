<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Evaluating RSV monoclonal antibody programmes • rsvie</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Evaluating RSV monoclonal antibody programmes">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rsvie</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/example_mab.html">Evaluating RSV monoclonal antibody programmes</a>
    </li>
    <li>
      <a href="../articles/example_mat.html">Evaluating RSV maternal vaccination programmes</a>
    </li>
    <li>
      <a href="../articles/example_oa.html">Evaluating RSV older adult vaccination programmes</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Evaluating RSV monoclonal antibody
programmes</h1>
                        <h4 data-toc-skip class="author">David
Hodgson</h4>
            
            <h4 data-toc-skip class="date">2024-12-09</h4>
      

      <div class="hidden name"><code>example_mab.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="markdown-explaining-how-to-use-the-rsv-impact-evaluation-rsvie-package">Markdown explaining how to use the RSV impact evaluation
<code>rsvie</code> package<a class="anchor" aria-label="anchor" href="#markdown-explaining-how-to-use-the-rsv-impact-evaluation-rsvie-package"></a>
</h2>
<div class="section level3">
<h3 id="load-package-and-functions">1. Load package and functions<a class="anchor" aria-label="anchor" href="#load-package-and-functions"></a>
</h3>
<p>This vignette explains how to use the <code>rsvie</code> package to
evaluate the impact of different RSV intervention programmes. The
package is designed to be flexible and allow the user to define
different intervention programmes, with different immunological
profiles, and evaluate their impact on RSV outcomes.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the package (or library(rsvie))</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">rsvie</span></span></span>
<span><span class="co">## Creating a new generic function for 'run' in package 'rsvie'</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This defines an RSVPrograpkmme class</span></span>
<span><span class="va">RSVempty</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_rsv_programme.html">make_rsv_programme</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># To see what is in these slots </span></span>
<span><span class="va">RSVempty</span> <span class="op">%&gt;%</span> <span class="va">str</span></span></code></pre></div>
<p>Let’s have a more detailed look at what’s in these slots. I wouldn’t
recommend changing them, but future package iterations should allow for
more flexibility.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RSVempty</span><span class="op">@</span><span class="va">prog_name</span> <span class="co"># Name of the programme considered (currently empty)</span></span>
<span><span class="va">RSVempty</span><span class="op">@</span><span class="va">econ_name</span> <span class="co"># Name of the economics considered (currently empty)</span></span>
<span><span class="va">RSVempty</span><span class="op">@</span><span class="va">model</span> <span class="co"># This is the R interface to the cpp class defined in src/RunIntervention.cpp</span></span>
<span><span class="va">RSVempty</span><span class="op">@</span><span class="va">model_par</span> <span class="co"># This gives the burn-in and run_yrs (how long the model is run for after bur-in). </span></span>
<span><span class="va">RSVempty</span><span class="op">@</span><span class="va">econ_par</span> <span class="co"># Parameters associated with the economics of the model, time_horizon is currently set to 10 years, and the discount rate is 3.5%</span></span>
<span><span class="va">RSVempty</span><span class="op">@</span><span class="va">uk_data</span><span class="op">$</span><span class="va">populationAgeGroup</span> <span class="co"># Posterior distributions fitted to UK-specific data</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-estimate-pre-vaccination-burden-and-risks-of-the-programme">2. Add estimate pre-vaccination burden and risks of the
programme<a class="anchor" aria-label="anchor" href="#add-estimate-pre-vaccination-burden-and-risks-of-the-programme"></a>
</h3>
<p>With this empty class, we now add information on the economics of the
model. This includes the health outcomes considered, the risk of each
health outcome occurring per infection, and the QALY loss and cost of
each outcome. First, we define the risk of each health outcome per age
group:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">econ_raw_ss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"rsvie"</span>, <span class="st">"extdata"</span>, <span class="st">"econ"</span>, <span class="st">"econ_pars_ss.csv"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">risks_vhr_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"rsvie"</span>, <span class="st">"extdata"</span>, <span class="st">"econ"</span>,  <span class="st">"outcome_risks_vhr.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomes_incidence</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"rsvie"</span>, <span class="st">"extdata"</span>, <span class="st">"econ"</span>, <span class="st">"outcomes_incidence.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">model_cases_sample_mean_get</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"rsvie"</span>, <span class="st">"extdata"</span>, <span class="st">"model_cases_sample_mean.RData"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">model_cases_sample_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="va">model_cases_sample_mean_get</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This function then converts the incidence of the outcome to the risk per infection</span></span>
<span><span class="va">risks_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/covert_raw_to_risk.html">covert_raw_to_risk</a></span><span class="op">(</span><span class="va">RSVempty</span>, <span class="va">outcomes_incidence</span>, <span class="va">model_cases_sample_mean</span><span class="op">)</span></span>
<span></span>
<span><span class="va">RSVempty_ss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_economics.html">add_economics</a></span><span class="op">(</span><span class="va">RSVempty</span>, econ_name <span class="op">=</span> <span class="st">"E_W2023"</span>, <span class="va">econ_raw_ss</span>, <span class="va">risks_raw</span>, <span class="va">risks_vhr_raw</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: EnvStats</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'EnvStats'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     predict, predict.lm</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="add-in-immunology">3. Add in immunology<a class="anchor" aria-label="anchor" href="#add-in-immunology"></a>
</h3>
<p>Now, we need to load the QALY loss and cost for each outcome per age
group.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">immune_profile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"rsvie"</span>, <span class="st">"extdata"</span>, <span class="st">"efficacies"</span>, <span class="st">"immune_profiles_unbound.RDS"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-intervention-programmes">4. Add intervention programmes<a class="anchor" aria-label="anchor" href="#add-intervention-programmes"></a>
</h3>
<p>With the economics and risks defined, we can now define an
intervention programme. We have several vignettes showing how to
evaluate various types of programmes that use different products. Here
is a simple example:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># To evaluate a seasonal monoclonal given at birth, we load an Excel spreadsheet such as:</span></span>
<span><span class="va">cal_none</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"rsvie"</span>, <span class="st">"extdata"</span>, <span class="st">"calendars"</span>, <span class="st">"cal_none.csv"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">cal_vhr_s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"rsvie"</span>, <span class="st">"extdata"</span>, <span class="st">"calendars"</span>, <span class="st">"cal_vhr_s.csv"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">cal_mabs_s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"rsvie"</span>, <span class="st">"extdata"</span>, <span class="st">"calendars"</span>, <span class="st">"cal_mabs_s.csv"</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">RSV_mab_vhr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_programme.html">add_programme</a></span><span class="op">(</span><span class="va">RSVempty_ss</span>, prog_name <span class="op">=</span> <span class="st">"pal"</span>, <span class="va">cal_none</span>, <span class="va">cal_vhr_s</span>, <span class="va">immune_profile</span><span class="op">$</span><span class="va">mabs_vhr</span><span class="op">)</span></span>
<span><span class="va">RSV_mab_s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_programme.html">add_programme</a></span><span class="op">(</span><span class="va">RSVempty_ss</span>, prog_name <span class="op">=</span> <span class="st">"mab_s"</span>, <span class="va">cal_mabs_s</span>, <span class="va">cal_vhr_s</span>, <span class="va">immune_profile</span><span class="op">$</span><span class="va">mabs</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="simulate-the-intervention-programme">5. Simulate the intervention programme<a class="anchor" aria-label="anchor" href="#simulate-the-intervention-programme"></a>
</h3>
<p>To simulate a programme, we call <code><a href="../reference/run.html">rsvie::run</a></code> on the class
defined above. This will simulate the programme and return a class with
the results.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># base vase</span></span>
<span><span class="va">RSV_mab_vhr</span> <span class="op">&lt;-</span> <span class="fu">rsvie</span><span class="fu">::</span><span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="va">RSV_mab_vhr</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Running: Iterating through model simulations</span></span>
<span><span class="co">##  Sample no:  1     Running: Calculating the outcomes</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># seasonal</span></span>
<span><span class="va">RSV_mab_s</span> <span class="op">&lt;-</span> <span class="fu">rsvie</span><span class="fu">::</span><span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="va">RSV_mab_s</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Running: Iterating through model simulations</span></span>
<span><span class="co">##  Sample no:  1     Running: Calculating the outcomes</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="extract-incidence-for-further-exploration">6. Extract incidence for further exploration<a class="anchor" aria-label="anchor" href="#extract-incidence-for-further-exploration"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Look at full posterior outcomes</span></span>
<span></span>
<span><span class="co"># summari outcomes annually</span></span>
<span><span class="va">RSV_mab_vhr_sum</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summarise_outcomes.html">summarise_outcomes</a></span><span class="op">(</span><span class="va">RSV_mab_vhr</span><span class="op">)</span></span>
<span><span class="va">RSV_mab_s_sum</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summarise_outcomes.html">summarise_outcomes</a></span><span class="op">(</span><span class="va">RSV_mab_s</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/get_averted_df.html">get_averted_df</a></span><span class="op">(</span><span class="va">RSV_mab_vhr_sum</span>, <span class="va">RSV_mab_s_sum</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by David Hodgson.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
